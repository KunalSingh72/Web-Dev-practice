<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rock-Paper-Scissors</title>
    <style>
      body {
        background: rgb(25, 25, 25);
        color: white;
        font-family: arial;
      }

      .move-icon {
        height: 50px;
      }
      .move-btn {
        width: 120px;
        height: 120px;
        background: transparent;
        border: 3px solid white;
        border-radius: 50%;
        margin-right: 10px;
        cursor: pointer;
      }
      h2 {
        margin-top: 50px;
      }
      .score {
        margin-top: 60px;
      }
      .reset-score-btn,
      .auto-play-button {
        background: white;
        border: none;
        font-size: 15px;
        padding: 8px 15px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h1 class="title">Rock Paper Scissors</h1>
    <button onclick="playGame('Rock')" class="move-btn">
      <img class="move-icon" src="images/rock-emoji.png" alt="Rock" />
    </button>
    <button onclick="playGame('Paper')" class="move-btn">
      <img class="move-icon" src="images/paper-emoji.png" alt="Paper" />
    </button>
    <button onclick="playGame('Scissors')" class="move-btn">
      <img class="move-icon" src="images/scissors-emoji.png" alt="Scissors" />
    </button>

    <h2 class="js-result"></h2>
    <p class="js-moves"></p>
    <p class="js-scores score"></p>

    <button
      onclick="
        score.wins = 0;
        score.losses = 0;
        score.ties = 0;
        localStorage.removeItem('score');
        updateScoreElement();
      "
      class="reset-score-btn"
    >
      Reset Score
    </button>

    <button class="auto-play-button" onclick="autoPLay()">Auto Play</button>
  </body>
  <script>
    const score = JSON.parse(localStorage.getItem("score")) || {
      wins: 0,
      losses: 0,
      ties: 0,
    };

    updateScoreElement();

    function pickComputerMove() {
      const num = Math.random();
      let compMove = "";

      if (num >= 0 && num < 1 / 3) {
        compMove = "Rock";
      } else if (num >= 1 / 3 && num < 2 / 3) {
        compMove = "Paper";
      } else {
        compMove = "Scissors";
      }

      return compMove;
    }

    let isAutoPlaying = false;
    let intervalId;
    function autoPLay() {
      if (!isAutoPlaying) {
        intervalId = setInterval(function () {
          const playerMove = pickComputerMove();
          playGame(playerMove);
        }, 1000);
        isAutoPlaying = true;
      } else {
        clearInterval(intervalId);
        isAutoPlaying = true;
      }
    }

    function playGame(playerMove) {
      const compMove = pickComputerMove();

      let result = "";
      if (playerMove === "Rock") {
        if (compMove === "Rock") {
          result = "Tie.";
          score.ties += 1;
        } else if (compMove === "Paper") {
          result = "You Lose.";
          score.losses += 1;
        } else {
          result = "You Win.";
          score.wins += 1;
        }
      } else if (playerMove === "Paper") {
        if (compMove === "Rock") {
          result = "You win.";
          score.wins += 1;
        } else if (compMove === "Paper") {
          result = "Tie.";
          score.ties += 1;
        } else {
          result = "You lose.";
          score.losses += 1;
        }
      } else {
        if (compMove === "Rock") {
          result = "You lose.";
          score.losses += 1;
        } else if (compMove === "Paper") {
          result = "You win.";
          score.wins += 1;
        } else {
          result = "Tie.";
          score.ties += 1;
        }
      }

      localStorage.setItem("score", JSON.stringify(score));
      updateScoreElement();

      document.querySelector(".js-result").innerHTML = `${result}`;
      document.querySelector(".js-moves").innerHTML = `You
      <img class="move-icon" src="images/${playerMove}-emoji.png" alt="playerMove">
      <img class="move-icon" src="images/${compMove}-emoji.png" alt="computerMove">
      Computer`;
    }
    function updateScoreElement() {
      document.querySelector(".js-scores").innerHTML =
        `wins: ${score.wins}, losses: ${score.losses}, ties: ${score.ties}`;
    }
  </script>
</html>
